# ========================================
# グローバル設定
# ========================================

[env]
_.file = [".env"]
_.path = ["./node_modules/.bin"]

# ========================================
# ツール
# ========================================

[tools]
node = "22"
"npm:pnpm" = "10.26.0"
"npm:prettier" = "3.7.4"

# ========================================
# コマンド（ショートカット）
# ========================================

[tasks.format]
description = "Prettierでソース全体を整形"
run = "pnpm run format"

[tasks."lint:types"]
description = "TypeScriptの型チェックのみ"
run = "pnpm exec tsc --noEmit"

[tasks."lint:prettier"]
description = "Prettierのチェックのみ"
run = "pnpm run prettier:check"

[tasks.test]
description = "Vitestでユニットテストを実行"
run = "pnpm run test"

[tasks.lint]
description = "型チェックとフォーマット検証を実行"
depends = ["lint:types", "lint:prettier", "lint:eslint"]

[tasks."lint:eslint"]
description = "ESLintのチェックのみ"
run = "pnpm run lint:eslint"

[tasks.build]
description = "TypeScriptをビルド"
run = "pnpm run build"

[tasks.clean]
description = "ビルド成果物を削除"
run = "pnpm run clean"

# ========================================
# エイリアス（まとめ実行）
# ========================================

[tasks.ci]
description = "CI 相当のチェック (lint + build)"
depends = ["lint", "test", "build"]
run = "echo '✅ CI checks completed'"

# ========================================
# グローバル設定
# ========================================

[env]
_.file = [".env"]
_.path = ["./node_modules/.bin"]

# ========================================
# ツール
# ========================================

[tools]
node = "22"
"npm:pnpm" = "10.26.0"
"npm:prettier" = "3.6.2"

# ========================================
# コマンド（ショートカット）
# ========================================

[tasks.format]
description = "Prettierでソース全体を整形"
run = "prettier --write \"src/**/*.{ts,js}\" popup.html popup_bootstrap.js manifest.json popup.css content.css README.md"

[tasks."lint:types"]
description = "TypeScriptの型チェックのみ"
run = "pnpm exec tsc --noEmit"

[tasks."lint:prettier"]
description = "Prettierのチェックのみ"
run = "prettier --check \"src/**/*.{ts,js}\" popup.html popup_bootstrap.js manifest.json popup.css content.css README.md"

[tasks.lint]
description = "型チェックとフォーマット検証を実行"
depends = ["lint:types", "lint:prettier"]

[tasks.build]
description = "TypeScriptをビルド"
run = "pnpm run build"

[tasks.clean]
description = "ビルド成果物を削除"
run = "pnpm run clean"

# ========================================
# エイリアス（まとめ実行）
# ========================================

[tasks.ci]
description = "CI 相当のチェック (lint + build)"
depends = ["lint", "build"]
run = "echo '✅ CI checks completed'"
